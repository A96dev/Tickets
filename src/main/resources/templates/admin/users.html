<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="/admin/admin_layout">
<head>
<meta charset="UTF-8">
<title>Usuarios</title>
</head>
<body>


	<div layout:fragment="content">

		<!-- Content Header (Page header) -->
		<section class="content-header">
			<div class="container-fluid">
				<div class="row mb-2">
					<div class="col-sm-6">
						<h1>Administrar Usuarios</h1>
					</div>
					<div class="col-sm-6">
						<ol class="breadcrumb float-sm-right">
							<li class="breadcrumb-item"><a href="#">Home</a></li>
							<li class="breadcrumb-item active">Simple Tables</li>
						</ol>
					</div>
				</div>
			</div>
			<!-- /.container-fluid -->
		</section>

		<!-- Main content -->
		<section class="content">
			<div class="container-fluid">
				<div class="row">
					<div class="col-md-8">
						<!-- TABLE: LATEST ORDERS -->
						<div class="card">
							<div class="card-header">
								<h3 class="card-title">Lista de Usuarios</h3>
								<div class="card-tools">
									<button type="button" class="btn btn-tool"
										data-card-widget="collapse">
										<i class="fas fa-minus"></i>
									</button>
									<button type="button" class="btn btn-tool"
										data-card-widget="remove">
										<i class="fas fa-times"></i>
									</button>
								</div>
							</div>
							<!-- /.card-header -->
							<div class="card-body">
								<table id="example1" class="table table-bordered table-striped">
									<thead>
										<tr>
											<th scope="col">Usuario</th>
											<th scope="col">Estado</th>
											<th scope="col">Administrar <button type="button" class="btn btn-primary float-right newUser">Nuevo</button></th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="user : ${users}">
											<td th:text="${user.username}"></td>
											<td th:text="${user.enabled}"></td>
											<td>
												<a href="#" th:href="@{/contacts/contactsform?id=__${contact.id}__}">
													<button type="button" class="btn btn-info">
														<span class="glyphicon glyphicon-edit"></span>
													</button>
												</a>
					
												<a href="#" th:href="@{/contacts/removecontact?id=__${contact.id}__}">
													<button type="button" class="btn btn-danger">
														<span class="glyphicon glyphicon-trash"></span>
													</button>
												</a>
											</td>
										</tr>
									</tbody>
									<tfoot>
										<tr>
											<th scope="col">Usuario</th>
											<th scope="col">Estado</th>
											<th scope="col">Administrar</th>
										</tr>
									</tfoot>
								</table>
							</div>
							<!-- /.card-body -->
						</div>
						<!-- /.card -->
					</div>
					<div class="col-md-4">
						<!-- PRODUCT LIST -->
						<div class="card">
							<div class="card-header">
								<h3 class="card-title">Crear / Editar Usuario</h3>

								<div class="card-tools">
									<button type="button" class="btn btn-tool"
										data-card-widget="collapse">
										<i class="fas fa-minus"></i>
									</button>
									<button type="button" class="btn btn-tool"
										data-card-widget="remove">
										<i class="fas fa-times"></i>
									</button>
								</div>
							</div>
							<!-- /.card-header -->
							<form action="#" th:action="@{/contacts/addcontact}" th:object="${contactModel}" method="post">
				                <div class="card-body">
				                  <div class="form-group">
				                    <label for="exampleInputEmail1">Usuario</label>
				                    <input type="text" class="form-control" id="inputUser" placeholder="Ingrese el usuario" disabled required th:field="*{username}" th:value="${username}">
				                  </div>
				                  <div class="form-group">
				                    <label for="exampleInputPassword1">Contraseña</label>
				                    <input type="password" class="form-control" id="inputPass" placeholder="Ingrese la contraseña" disabled required th:field="*{password}" th:value="${password}">
				                  </div>
				                  <div class="form-group">
			                        <label>Rol del Usuario</label>
			                        <select id="selectRole" class="form-control" disabled required th:field="*{userRol}" th:value="${userRol}">
			                          <option>Invitado</option>
			                          <option>Staff</option>
			                          <option>Supervisor</option>
			                          <option>Administrador</option>
			                        </select> 
			                      </div>
				                  <div class="form-group">
				                    <div class="custom-control custom-switch custom-switch-off-danger custom-switch-on-success">
				                      <input type="checkbox" class="custom-control-input" id="customSwitch3" disabled required th:field="*{enabled}" th:value="${enabled}">
				                      <label class="custom-control-label" for="customSwitch3">Estado de usuario (Habilitado / Deshabilitado)</label>
				                    </div>
				                  </div>
				                </div>
				                <!-- /.card-body -->
				
				                <div class="card-footer">
				                  <button type="button" class="btn btn-warning btnClean">Limpiar</button>
				                  <button type="submit" class="btn btn-success float-right btnSave">Guardar</button>
				                </div>
				              </form>
							<!-- /.card-footer -->
						</div>
						<!-- /.card -->
					</div>
				</div>
			</div>

		</section>
		<!-- Main content -->


	</div>


	<th:block layout:fragment="script">
		<!-- jQuery -->
		<script src="/admin/plugins/jquery/jquery.min.js"></script>
		<script>
			$(document).ready( function () {
				$(function () {
				    $("#example1").DataTable({
				      "responsive": true, 
				      "lengthChange": false, 
				      "autoWidth": false,
				      "buttons": ["copy", "csv", "excel", "pdf", "print", "colvis"]/*,
				      "serverSide": true,
				        "ajax": {
				            "url": "/users/showAll",
				            "type": "GET",
				            "dataType": "json",
				            "contentType": "application/json",
				            "data": function (d) {
				                return JSON.stringify(d);
				            }
				        },
				        "columns": [
				            {"data": "username"},
				            {"data": "enabled"}
				        ]*/
				    }).buttons().container().appendTo('#example1_wrapper .col-md-6:eq(0)');
				  });
				
				$(".newUser").click(() => {
				    $("#inputUser").removeAttr("disabled");
				    $("#inputPass").removeAttr("disabled");
				    $("#selectRole").removeAttr("disabled");
				    $("#customSwitch3").removeAttr("disabled");
				});
				
				$(".btnClean").click(() => {
				    $("#inputUser").val("");
				    $("#inputUser").attr("disabled", "disabled");
				    $("#inputPass").val("");
				    $("#inputPass").attr("disabled", "disabled");
				    $("#selectRole").val("");
				    $("#selectRole").attr("disabled", "disabled");
				    $("#customSwitch3").prop('checked', false);
				    $("#customSwitch3").attr("disabled", "disabled");
				});
			});
			
			
			console.log("Pagina de Usuarios");
		</script>
	</th:block>

</body>
</html>
